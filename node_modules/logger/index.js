(function(){
	'use strict';
	
	var pg = require('pg');
	
	function logError(error){
		pg.connect(function(err, client){
			if (err) {
				console.error('logError:', err);
			} else {
				var err = {
					text = error.text,
					code = error.errorCode,
					stack = error.errorStack
				}
				client.query({
					text: 'INSERT INTO sysinfo.error_log(text, error_code, error_stack) VALUES ($1, $2, $3)',
					values: [
						err.text,
						err.code,
						err.stack
					]
				})
			}
		})
	}
})();